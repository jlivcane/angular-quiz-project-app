<div class="login-container">
  <mat-card class="quiz-card">
    <mat-tab-group>
      <mat-tab label="Login">
        <mat-card-content>
          <form [formGroup]="loginForm" (ngSubmit)="login()">
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Email</mat-label>
              <input
                matInput
                type="email"
                formControlName="email"
                placeholder="Enter your email"
                required
              />
              <mat-error *ngIf="loginForm.controls['email']?.invalid && loginForm.controls['email']?.touched">
                Valid email is required.
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Password</mat-label>
              <input
                matInput
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password"
                placeholder="Enter your password"
                required
              />
              <button mat-icon-button matSuffix type="button" (click)="togglePassword()" [attr.aria-label]="'Toggle password visibility'">
                <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
              <mat-error *ngIf="loginForm.controls['password']?.invalid && loginForm.controls['password']?.touched">
                Password is required and must be at least 6 characters long.
              </mat-error>
            </mat-form-field>

            <div class="actions">
              <a class="forgot-password" (click)="forgotPassword()">Forgot Password?</a>
            </div>
            <button mat-raised-button color="primary" type="submit" [disabled]="!loginForm.valid">
              Login
            </button>
            <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>
          </form>
        </mat-card-content>
      </mat-tab>

      <mat-tab label="Register">
        <mat-card-content>
          <form [formGroup]="registerForm" (ngSubmit)="register()">
            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Email</mat-label>
              <input
                matInput
                type="email"
                formControlName="email"
                placeholder="Enter your email"
                required
              />
              <mat-error *ngIf="registerForm.controls['email']?.invalid && registerForm.controls['email']?.touched">
                Valid email is required.
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill" class="full-width">
              <mat-label>Password</mat-label>
              <input
                matInput
                [type]="hideRegisterPassword ? 'password' : 'text'"
                formControlName="password"
                placeholder="Create a password"
                required
              />
              <button mat-icon-button matSuffix type="button" (click)="toggleRegisterPassword()" [attr.aria-label]="'Toggle password visibility'">
                <mat-icon>{{ hideRegisterPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
              <mat-error *ngIf="registerForm.controls['password']?.invalid && registerForm.controls['password']?.touched">
                Password must be at least 6 characters long.
              </mat-error>
            </mat-form-field>

            <button mat-raised-button color="accent" type="submit" [disabled]="!registerForm.valid">
              Register
            </button>
          </form>
        </mat-card-content>
      </mat-tab>
    </mat-tab-group>
  </mat-card>
</div>
